{% extends "base.html" %}
{% load urlify %}
{% load crispy_forms_tags %}
{% block head_title %}
    {{instance.title}}| {{block.super}}
{% endblock head_title %}

  <style>
        {% block style %}

       #map {
        height: 250px;
        width: 100%;
        margin-bottom:15px
       }
        .bo{
            background-color: white;
        }
        .inf {
            margin-top: -25px;
        }
        {% endblock style %}
  </style>

{% block ad_detail_link %}
<li> Businesses </li>
<li> {{ title }}</li>
        {% endblock %}

{% block content %}

 <div  class="col-xs-12 col-sm-12 ">

        <div  class="col-xs-12 col-sm-12 bo ">
<h3><strong>{{ title }} </strong></h3>
        <div class="col-xs-12 col-sm-12 col-md-12">
        <br/>

            <div style="margin-top: 15px" class="col-xs-12 col-sm-4 col-md-4 col-lg-3">

                <img src="{{ instance.logo.url }}" class="img-responsive " alt="Responsive image" style="margin-bottom: 10px">
                <a type="button" class="btn btn-info btn threee"  href="{{ instance.get_edit_url }}" /> <i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>


                <div class="hidden-xs panel panel-info ">
  <div class="panel-heading">Contact Info</div>
  <div class="panel-body">
<table class="table table-condensed">
   <thead>
    <tr>
      <td scope="row"><strong><small>Tel.</small></strong></td>
      <td><small>{{ instance.phone }}</small></td>


    </tr>
    <tbody>


    <tr>
      <th scope="row"><small>Email</small></th>
      <td><small>{{ instance.email }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Address</small></th>
      <td><small>{{ instance.address }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Website</small></th>
      <td><small>{{ instance.website }}</small></td>
    </tr>
    </tbody>
  </table>
  </div>
                </div>
             <div class="hidden-xs panel panel-info ">
  <div class="panel-heading">Openning Hours</div>
  <div class="panel-body">
<table class="table table-condensed">
   <thead>
    <tr>
      <td scope="row"><strong><small>Monday</small></strong></td>
        <td><small>{{ instance.mon_from }} - {{ instance.mon_to }}</small></td>


    </tr>
    </thead>
    <tbody>


    <tr>
      <th scope="row"><small>Tuesday</small></th>
        <td><small>{{ instance.tue_from }} - {{ instance.tue_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Wednesday</small></th>
        <td><small>{{ instance.wed_from }} - {{ instance.wed_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Thursday</small></th>
        <td><small>{{ instance.thu_from }} - {{ instance.thu_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Friday</small></th>
        <td><small>{{ instance.fri_from }} - {{ instance.fri_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Saturday</small></th>
        <td><small>{{ instance.sat_from }} - {{ instance.sat_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Sunday</small></th>
        <td><small>{{ instance.sun_from }} - {{ instance.sun_to }}</small></td>
    </tr>
    </tbody>
  </table>
  </div>
                </div></div>


<div class="hidden-sm hidden-md hidden-lg col-xs-12 inf">
<div class="visible-xs">
                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">


                    <div class="panel panel-info ">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a style="color:#31708f" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                Contact Info
                            </a>
                          </h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
<table class="table table-condensed">
   <thead>
    <tr>
      <td scope="row"><strong><small>Tel.</small></strong></td>
      <td><small>{{ instance.phone }}</small></td>


    </tr>
    <tbody>


    <tr>
      <th scope="row"><small>Email</small></th>
      <td><small>{{ instance.email }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Address</small></th>
      <td><small>{{ instance.address }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Website</small></th>
      <td><small>{{ instance.website }}</small></td>
    </tr>
    </tbody>
  </table>
  </div>
                        </div>
                    </div>
                    <div class="panel panel-info">
                        <div class="panel-heading" role="tab" id="headingTwo">
                          <h4 class="panel-title">
                            <a style="color:#31708f" class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              Opening Hours
                            </a>
                          </h4>
                        </div>
                        <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                          <div class="panel-body">
<table class="table table-condensed">
   <thead>
    <tr>
      <td scope="row"><strong><small>Monday</small></strong></td>
        <td><small>{{ instance.mon_from }} - {{ instance.mon_to }}</small></td>


    </tr>
    </thead>
    <tbody>


    <tr>
      <th scope="row"><small>Tuesday</small></th>
        <td><small>{{ instance.tue_from }} - {{ instance.tue_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Wednesday</small></th>
        <td><small>{{ instance.wed_from }} - {{ instance.wed_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Thursday</small></th>
        <td><small>{{ instance.thu_from }} - {{ instance.thu_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Friday</small></th>
        <td><small>{{ instance.fri_from }} - {{ instance.fri_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Saturday</small></th>
        <td><small>{{ instance.sat_from }} - {{ instance.sat_to }}</small></td>
    </tr>
    <tr>
      <th scope="row"><small>Sunday</small></th>
        <td><small>{{ instance.sun_from }} - {{ instance.sun_to }}</small></td>
    </tr>
    </tbody>
  </table>
  </div>
                        </div>
                    </div>

                    </div>
                        </div></div>

            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-9">

                <div id="map"></div>
                <p class="lead">{{ instance.description }}</p>

            <p><strong>Terms & Conditions: </strong>{{ instance.conditions}}</p>
            </div>

<script>
      function initMap() {
        var uluru = {lat: {{instance.lat}}, lng: {{instance.lon}} };
        var map = new google.maps.Map(document.getElementById("map"), {
          zoom: 14,
          center: uluru
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQIiekisSEMtQWap2q8ke1UL1_n-ZxeB8&callback=initMap">
    </script>




  <div  class="col-xs-12 col-sm-12  ">
      <hr/>
             <p class="lead">Reviews</p>
    {% if request.user.is_authenticated %}
            <div class="row">
        <form class="col-md-6 col-sm-12 col-xs-12" method="POST" action="."> {% csrf_token %}
                {{ comment_form|crispy }}
                <input type="submit" value="Post comment" class="btn btn-default">

            </form>
                </div>
     {% else %}
        <p>You must <a href="{% url 'login' %}"> login </a>to comment. <a href="{% url 'register' %}">Sign Up Now</a> </p>
        {% endif %}
            <hr/>
            {% for comment in comments %}
                <blockquote>
          <p>{{ comment.content }}</p>
          <small>via {{ comment.user }} | {{ comment.timestamp|timesince }} ago | {% if comment.children.count > 0 %}{{ comment.children.count }} Comment{% if comment.children.count > 1 %}s{% endif %} | {% endif %} <a class='comment-reply-btn' href='#'>Reply</a> | <a class='' href='{{ comment.get_absolute_url }}'>Thread</a> | {% if request.user == comment.user %}<a href='{{ comment.get_delete_url }}'>Delete</a> {% endif %}</small>
          <div class='comment-reply' style="display: None"> <br/>
              {% for child_comment in comment.children %}
                <blockquote>
                <p>{{ child_comment.content }}</p>
                <small>via {{ child_comment.user }} | {{ child_comment.timestamp|timesince }} ago</small>
                </blockquote>
             {% endfor %}
             {% if request.user.is_authenticated %}
            <form method="POST" action="."> {% csrf_token %}
                {{ comment_form | crispy }}
                <input type='hidden' name='parent_id' value='{{ comment.id }}'>
                <input type='submit' value='Reply' class='btn btn-default'>
            </form>
            {% else %}
        <p>You must login to comment </p>
        {% endif %}
        </div>

        </blockquote>

        <hr/>
      {% endfor %}
  </div>

    </div>

    </div>
 </div>

  </div>


<div class="col-sm-6 col-sm-offset-3"><div class="col-sm-12 col-sm-offset-1 ">


        </div>

    </div>
        </div></div>

{% endblock content %}


